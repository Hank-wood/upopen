require.config({paths:{hint:"/assets/widget/hint/hint",doc:"/assets/public/js/zh"}}),define(["hint","doc"],function(n,s){function e(n){n?($(".signInDialog").fadeIn(),$(".signInMask").fadeIn()):($(".signInMask").fadeOut(),$(".signInDialog").fadeOut(),t.val(""),d.val(""),l.removeClass("hide"),c.removeClass("hide"))}function o(){n.show("User isn't exist"),$(".signInDialog").addClass("dialogWrapError"),setTimeout(function(){$(".signInDialog").removeClass("dialogWrapError")},1e3)}function a(n){n?($(".beforeSignIn").hide(),$(".afterSignIn").show()):($(".beforeSignIn").show(),$(".afterSignIn").hide())}function i(){var n=($.cookies.get("userhead"),$.cookies.get("JSESSIONID"));a(n||!1)}var r=!0,t=$("#username"),d=$("#password");$(".signInMask").on("click",function(){e(!1)}),$("#toSignIn").on("click",function(){e(!0)}),$("#singInLink").on("click",function(){r=!r;var n,s,e;r?(n="SIGN IN",s="Don't have an account yet?",e="Sign up"):(n="CREATE ACCOUNT",s="Already have an account?",e="Sign in"),$("#singInLink").html(e),$(".signInDes").html(s),$(".signInBtn").html(n)});var l=$(".forUsername"),c=$(".forPassword");l.on("click",function(){l.addClass("holderOn"),t.get(0).focus()}),t.on("blur",function(){this.value?l.addClass("hide"):l.removeClass("hide"),l.removeClass("holderOn").addClass("holderOff")}).on("focus",function(){l.addClass("holderOn").removeClass("holderOff"),t.get(0).focus()}),c.on("click",function(){c.addClass("holderOn"),d.get(0).focus()}),d.on("blur",function(){this.value?c.addClass("hide"):c.removeClass("hide"),c.removeClass("holderOn").addClass("holderOff")}).on("focus",function(){c.addClass("holderOn").removeClass("holderOff"),d.get(0).focus()}),$(".signInForm").on("submit",function(){var n={username:t.val(),password:d.val()},i=r;return $.ajax({url:i?"/user/login":"/user/register",type:i?"get":"post",dataType:"json",data:n,success:function(n){0===n.code?(e(!1),a(!0)):o(s[n.code])}}),!1}),function(){i()}()});